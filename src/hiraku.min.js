!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){var s={direction:"right",breakpoint:-1},i=0,n={x:window.scrollX,y:window.scrollY},t="a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]";a.fn.extend({hiraku:function(n){var n=a.extend({},s,n),t="js-hiraku-offcanvas-"+i;i++;var e=a(this);e.addClass("js-hiraku-offcanvas-sidebar"),e.data("scroll",scroll),0===e.parent(".js-hiraku-offcanvas").length&&e.wrap("<div class='js-hiraku-offcanvas'/>"),e.attr("role","navigation"),e.attr("aria-hidden","true"),e.attr("aria-labelledby","hiraku-offcanvas-btn-"+i),$parent=e.parent(".js-hiraku-offcanvas"),$parent.attr("tabindex",1),$parent.attr("id",t),$parent.data("breakpoint",n.breakpoint),$parent.attr("aria-label","close"),a("body").addClass("js-hiraku-offcanvas-body"),"right"==n.direction?e.addClass("js-hiraku-offcanvas-sidebar-right"):e.addClass("js-hiraku-offcanvas-sidebar-left"),n.btn&&(a(n.btn).addClass("js-hiraku-offcanvas-btn"),a(n.btn).attr("data-toggle-offcanvas","#"+t),a(n.btn).attr("aria-expanded",!1),a(n.btn).attr("aria-label","Menu"),a(n.btn).attr("aria-controls","menu"),a(n.btn).attr("id","hiraku-offcanvas-btn-"+i)),n.fixedHeader&&a(n.fixedHeader).addClass("js-hiraku-header-fixed"),a(window).resize()}}),a(document).on("click",".js-hiraku-offcanvas-btn",function(s){var i=a(a(this).data("toggle-offcanvas")),e=i.find(t).first(),r=i.find(t).last(),o=a(this);e.off("keydown.hiraku-offcanvas").on("keydown.hiraku-offcanvas",function(a){9===a.which&&a.shiftKey&&(a.preventDefault(),i.focus())}),r.off("keydown.hiraku-offcanvas").on("keydown.hiraku-offcanvas",function(a){9!==a.which||a.shiftKey||(a.preventDefault(),i.focus())}),i.off("keydown.hiraku-offcanvas").on("keydown.hiraku-offcanvas",function(s){a(s.target).hasClass("js-hiraku-offcanvas")&&(9===s.which&&s.shiftKey?r.focus():9!==s.which||s.shiftKey?a(s.target).click():e.focus())}),o.addClass("js-hiraku-offcanvas-btn-active"),o.attr("aria-expanded",!0),n.x=window.scrollX,n.y=window.scrollY;var f=a("body").css({width:window.innerWidth,height:a(window).height()}),d=i.find(".js-hiraku-offcanvas-sidebar");d.attr("aria-hidden",!1),i.addClass("js-hiraku-offcanvas-open"),setTimeout(function(){a("html").css("marginTop",-1*window.scrollY),d.hasClass("js-hiraku-offcanvas-sidebar-right")?f.addClass("js-hiraku-offcanvas-body-right"):f.addClass("js-hiraku-offcanvas-body-left"),d.addClass("active"),e.focus()},1),s.preventDefault()}),a(document).on("click touchstart",".js-hiraku-offcanvas",function(s){a(s.target).hasClass("js-hiraku-offcanvas")&&(a(".js-hiraku-offcanvas-body").addClass("js-hiraku-offcanvas-body-moving"),a(".js-hiraku-offcanvas-body").removeClass("js-hiraku-offcanvas-body-right"),a(".js-hiraku-offcanvas-body").removeClass("js-hiraku-offcanvas-body-left"),a(".js-hiraku-offcanvas-sidebar").removeClass("active"),setTimeout(function(){a(s.target).removeClass("js-hiraku-offcanvas-open"),a(s.target).children(".js-hiraku-offcanvas-sidebar").attr("aria-hidden",!0),a(".js-hiraku-offcanvas-body").removeClass("js-hiraku-offcanvas-body-moving"),a("html").css("marginTop",""),a("body").css({width:"",height:""}),window.scrollTo(n.x,n.y);var i=a(".js-hiraku-offcanvas-btn-active");i.removeClass("js-hiraku-offcanvas-btn-active"),i.attr("aria-expanded",!1),i.focus()},300))}),a(window).resize(function(){a(".js-hiraku-offcanvas").each(function(){var s=a(this),i=a(this).data("breakpoint");s.hasClass("js-hiraku-offcanvas-open")||(i===-1||i>=window.innerWidth?(s.addClass("js-hiraku-offcanvas-active"),s.children(".js-hiraku-offcanvas-sidebar").attr("aria-hidden",!0)):(s.removeClass("js-hiraku-offcanvas-active"),s.children(".js-hiraku-offcanvas-sidebar").attr("aria-hidden",!1)))})})});